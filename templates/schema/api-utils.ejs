import type { ZodSchema } from 'zod';

export const validateSchema = (schema: ZodSchema, data: unknown) => {
  const result = schema.safeParse(data);

  if (!result.success) {
    const formattedErrors = result.error.format();
    const errorMessage = result.error.errors.map((err) => {
      return `Path: ${err.path.join('.')} - ${err.message}`;
    }).join('\n');

    throw new Error(
      `âŒ Invalid data according to zod schema:\n${errorMessage}\n\nğŸ” Received data: ${JSON.stringify(data, null, 2)}`
    );
  }
};